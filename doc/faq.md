# FAQ

## 1. 用什么传输协议？

![Data Flow](cg.png)

音视频之所以直接用基于 TCP 的 WebSocket 有两个原因：

- 云游戏对网络要求很高，在互联网上远程传输时天然就难以保证低延迟，所以我们设计时就是考虑用边缘网络为前提。在网络质量有一定保证时，TCP 是最容易实现的。

- 在使用 Boost 的前提下，不管是裸 TCP，还是 WebSocket，或者将来可能使用的 KCP，想切换都是改几行代码的事情。现在之所以没用 KCP，是因为目前流行的类 Boost.Asio 的 KCP 库是 GPL 协议的，而我们的开源协议是 Apache。当然，您可以自己换，我们也建议您这么干。如果您愿意，也十分欢迎您能帮忙写个非 GPL 协议的类 Boost.Asio 的 KCP 库。

控制消息使用 UDP，主要就是考虑到即时性。由于 UDP 的不可靠性，如果考虑极端的场景，有可能某个按键抬起的消息丢失，导致服务端认为这个按键一直被按下，所以我们并不认为当下的实现能在互联网复杂的环境下很好地实践。和前面说的 KCP 协议的问题一样，本来这块是考虑用 KCP 的……总之，目前我们还是假设有边缘网络的质量保证。

